<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•™ç‰§ç²¾å…µÂ·äº”è¿ç¯æŒ‘æˆ˜</title>
    <style>
        :root { --primary: #2c3e50; --gold: #d4af37; --success: #27ae60; --danger: #e74c3c; --bg: #f4f7f6; }
        body { font-family: 'PingFang SC', system-ui; background: var(--bg); margin: 0; padding: 0; }
        .container { max-width: 500px; margin: 0 auto; background: #fff; min-height: 100vh; position: relative; box-shadow: 0 0 20px rgba(0,0,0,0.1); }
        .header { background: var(--primary); color: #fff; padding: 25px 15px; text-align: center; border-bottom: 4px solid var(--gold); }
        #menu, #game-stage, #final-res { padding: 20px; display: none; }
        #menu { display: block; }
        .category-card { background: #fff; border: 2px solid #eee; border-radius: 15px; padding: 20px; margin-bottom: 15px; cursor: pointer; transition: 0.2s; }
        .category-card:active { background: #f9f9f9; transform: scale(0.98); }
        
        #game-screen { background: #fafafa; border: 1px solid #ddd; border-radius: 10px; min-height: 320px; position: relative; overflow: hidden; padding: 10px; }
        .bubble { position: absolute; padding: 12px; background: var(--danger); color: #fff; border-radius: 20px; font-weight: bold; cursor: pointer; user-select: none; }
        .item-tag { display: inline-block; padding: 10px 14px; margin: 5px; background: #eee; border-radius: 8px; font-size: 14px; cursor: pointer; }
        .drop-zone { border: 2px dashed var(--gold); min-height: 70px; margin: 15px 0; padding: 12px; border-radius: 10px; background: #fffdf5; font-size: 15px; line-height: 1.6; color: var(--primary); }
        
        .progress-ui { font-size: 16px; font-weight: bold; color: var(--gold); margin-bottom: 15px; text-align: center; }
        .btn-action { width: 100%; padding: 15px; background: var(--success); color: #fff; border: none; border-radius: 10px; font-weight: bold; font-size: 16px; margin-top: 10px; cursor: pointer; }
        .btn-cancel { width: 100%; padding: 12px; background: #fff; color: var(--danger); border: 2px solid var(--danger); border-radius: 10px; font-weight: bold; font-size: 14px; margin-top: 15px; cursor: pointer; }
        .btn-action:active { opacity: 0.8; }
        .btn-cancel:active { background: #fff5f5; }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h2 style="margin:0">ğŸ›¡ï¸ æ•™ç‰§ç²¾å…µÂ·äº”è¿ç¯æŒ‘æˆ˜</h2>
        <p style="margin:5px 0 0; font-size:12px; opacity:0.8">è¯·è¿ç»­é€šè¿‡ 5 é¡¹å±çµå…³å¡</p>
    </div>

    <!-- ä¸»èœå• -->
    <div id="menu">
        <div class="category-card" onclick="startSeries(1)"><h3>âš”ï¸ ç¬¬ä¸€ç±»ï¼šçœŸé“å®ˆæœ›è€…</h3><p>æµ‹è¯•ä½ å¯¹çœŸç†è§„æ¨¡çš„è¾¨æèƒ½åŠ›</p></div>
        <div class="category-card" onclick="startSeries(2)"><h3>ğŸ“¦ ç¬¬äºŒç±»ï¼šå¿ å¿ƒå¥½ç®¡å®¶</h3><p>æµ‹è¯•ä½ å¯¹åœ£æ´å“æ ¼çš„æ­£ç¡®è®¤çŸ¥</p></div>
        <div class="category-card" onclick="startSeries(3)"><h3>ğŸƒ ç¬¬ä¸‰ç±»ï¼šç¦éŸ³å¿«è·‘æ‰‹</h3><p>æµ‹è¯•ä½ å¯¹ä¿ç½—æœ«äº†å¿ƒå¿—çš„è®°å¿†</p></div>
    </div>

    <!-- æ¸¸æˆèˆå° -->
    <div id="game-stage">
        <div class="progress-ui" id="progress-text">ç¬¬ 1 / 5 å…³</div>
        <div id="game-screen"></div>
        <button id="submit-btn" class="btn-action" onclick="validateCurrentGame()">ç¡®è®¤æäº¤éªŒè¯</button>
        <button class="btn-cancel" onclick="abandonGame()">æ”¾å¼ƒæŒ‘æˆ˜ Â· è¿”å›èœå•</button>
    </div>

    <!-- ç»“ç®—é¡µ -->
    <div id="final-res" style="text-align:center;">
        <div style="font-size:60px; margin-bottom:20px;">ğŸ†</div>
        <h1 style="color:var(--success); margin-top:0;">é—¯å…³å¤§è·å…¨èƒœï¼</h1>
        <p style="color:#666; line-height:1.6;">ä½ å·²ç»æˆåŠŸå®Œæˆäº† 5 é¡¹å±çµä»»åŠ¡ã€‚<br>æ„¿è¿™äº›è¯è¯­å¸¸åœ¨ä½ å¿ƒé‡Œï¼Œä½œåŸºç£ç²¾å…µã€‚</p>
        <button class="btn-action" style="background:var(--primary)" onclick="location.reload()">è¿”å›ä¸»èœå•æŒ‘æˆ˜å…¶ä»–</button>
    </div>
    <div style="text-align:center; font-size:11px; color:#333; padding:20px; line-height:1.6; border-top:1px solid #eee;">
        Â© 2026 æ‹¿åŸåäººåœ£ç»æ•™ä¼šï¼Œç‰ˆæƒæ‰€æœ‰
    </div>
</div>

<script>
    let curCat = 0;
    let curStep = 0;
    let pInput = [];
    let sInput = [];
    let gameRef = null;

    const db = {
        1: [
            { t: "æ•¬è™”å¥¥ç§˜", type: "puzzle", items: ["å¤§å“‰","æ•¬è™”çš„å¥¥ç§˜","æ— äººä¸ä»¥ä¸ºç„¶","å°±æ˜¯ç¥","åœ¨è‚‰èº«æ˜¾ç°","è¢«åœ£çµç§°ä¹‰"] },
            { t: "å®ˆä½è§„æ¨¡", type: "puzzle", items: ["ä½ ä»æˆ‘","å¬çš„é‚£","çº¯æ­£è¯è¯­çš„è§„æ¨¡","è¦ç”¨åœ¨","åŸºç£è€¶ç¨£é‡Œçš„","ä¿¡å¿ƒå’Œçˆ±å¿ƒ","å¸¸å¸¸å®ˆç€"] },
            { t: "ç¢è£‚è™šè°ˆ", type: "click", target: 8 },
            { t: "çœŸç†æœ¬æº", type: "puzzle", items: ["åœ£ç»","éƒ½æ˜¯ç¥æ‰€é»˜ç¤ºçš„","äºæ•™è®­","ç£è´£","ä½¿äººå½’æ­£","æ•™å¯¼äººå­¦ä¹‰","æ˜¯æœ‰ç›Šçš„"] },
            { t: "è¾¨åˆ«å¼‚ç«¯", type: "click", target: 10 }
        ],
        2: [
            { t: "ç›‘ç£æ­£é¢å“æ ¼", type: "sort", goods: ["å–„äºæ•™å¯¼","ç®¡ç†å®¶åŠ¡","ç«¯åº„é¡ºæœ","ä¸é…—é…’"], bads: ["å¥½å–é…’","æ‰“äºº","æ–°å…¥æ•™","ä¸€å£ä¸¤èˆŒ"] },
            { t: "æ‰§äº‹æ­£é¢å“æ ¼", type: "sort", goods: ["å­˜æ¸…æ˜è‰¯å¿ƒ","å‡¡äº‹å¿ å¿ƒ","å¤§æœ‰èƒ†é‡","ä¸€ä¸ªå¦»å­çš„ä¸ˆå¤«"], bads: ["è´ªè´¢","è¨€è¯­åå¤","å¥½åµé—¹"] },
            { t: "è´µé‡å™¨çš¿", type: "puzzle", items: ["äººè‹¥è‡ªæ´","è„±ç¦»å‘è´±çš„äº‹","å°±å¿…ä½œ","è´µé‡çš„å™¨çš¿","æˆä¸ºåœ£æ´","åˆä¹ä¸»ç”¨"] },
            { t: "ç²¾å…µå¿ƒæ€", type: "sort", goods: ["åˆšå¼ºçš„å¿ƒ","ä»çˆ±çš„å¿ƒ","è°¨å®ˆçš„å¿ƒ"], bads: ["èƒ†æ€¯çš„å¿ƒ","æ··ä¹±çš„å¿ƒ","è´ªçˆ±ç°ä¸–"] },
            { t: "æå¤šçš„æ¦œæ ·", type: "puzzle", items: ["ä½ è‡ªå·±","å‡¡äº‹è¦","æ˜¾å‡º","å–„è¡Œçš„æ¦œæ ·","åœ¨æ•™è®­ä¸Š","è¦çº¯å…¨åº„é‡"] }
        ],
        3: [
            { t: "æœ€åå®£å‘Š1", type: "puzzle", items: ["é‚£ç¾å¥½çš„ä»—","æˆ‘å·²ç»æ‰“è¿‡äº†","å½“è·‘çš„è·¯","æˆ‘å·²ç»è·‘å°½äº†","æ‰€ä¿¡çš„é“","æˆ‘å·²ç»å®ˆä½äº†"] },
            { t: "å† å†•å®£å‘Š", type: "puzzle", items: ["ä»æ­¤ä»¥å","æœ‰å…¬ä¹‰çš„å† å†•","ä¸ºæˆ‘å­˜ç•™","å°±æ˜¯æŒ‰ç€å…¬ä¹‰","å®¡åˆ¤çš„ä¸»","è¦èµç»™æˆ‘çš„"] },
            { t: "æœ«äº†å˜±æ‰˜", type: "puzzle", items: ["åŠ¡è¦ä¼ é“","æ— è®ºå¾—æ—¶ä¸å¾—æ—¶","æ€»è¦ä¸“å¿ƒ","å¹¶ç”¨ç™¾èˆ¬çš„å¿è€","è´£å¤‡äºº","è­¦æˆ’äºº"] },
            { t: "ç²¾å…µå‡†åˆ™", type: "puzzle", items: ["å‡¡åœ¨å†›ä¸­å½“å…µçš„","ä¸å°†ä¸–åŠ¡ç¼ èº«","å¥½å«é‚£","æ‹›ä»–å½“å…µçš„äºº","æ¬¢å–œ"] },
            { t: "åŒå—è‹¦éš¾", type: "puzzle", items: ["ä½ è¦å’Œæˆ‘","åŒå—è‹¦éš¾","å¥½åƒ","åŸºç£è€¶ç¨£çš„","ç²¾å…µ"] }
        ]
    };

    function startSeries(c) {
        curCat = c; curStep = 0;
        document.getElementById('menu').style.display = 'none';
        document.getElementById('game-stage').style.display = 'block';
        loadGame();
    }

    function loadGame() {
        pInput = []; sInput = [];
        const stage = db[curCat][curStep];
        gameRef = stage;
        document.getElementById('progress-text').innerText = `ç¬¬ ${curStep + 1} / 5 å…³ï¼š${stage.t}`;
        const screen = document.getElementById('game-screen');
        screen.innerHTML = "";
        document.getElementById('submit-btn').style.display = (stage.type === "click" ? "none" : "block");

        if (stage.type === "puzzle") {
            const az = document.createElement('div'); az.className = "drop-zone"; az.id = "p-ans"; az.innerText = "æŒ‰é¡ºåºç‚¹å‡»ä¸‹æ–¹å—...";
            const pool = document.createElement('div');
            [...stage.items].sort(() => Math.random()-0.5).forEach(txt => {
                const b = document.createElement('span'); b.className = "item-tag"; b.innerText = txt;
                b.onclick = () => { pInput.push(txt); az.innerText = pInput.join(" > "); b.style.visibility = "hidden"; };
                pool.appendChild(b);
            });
            screen.appendChild(az); screen.appendChild(pool);
        } 
        else if (stage.type === "sort") {
            const az = document.createElement('div'); az.className = "drop-zone"; az.id = "s-ans"; az.innerText = "æŒ‘é€‰ç¬¦åˆåœ£ç»è¦æ±‚çš„å“è´¨...";
            const pool = document.createElement('div');
            const all = [...stage.goods, ...stage.bads].sort(() => Math.random()-0.5);
            all.forEach(txt => {
                const b = document.createElement('span'); b.className = "item-tag"; b.innerText = txt;
                b.onclick = () => { sInput.push(txt); const n = document.createElement('span'); n.className="item-tag"; n.innerText=txt; n.style.background="#d4af37"; n.style.color="#fff"; az.appendChild(n); b.style.visibility="hidden"; };
                pool.appendChild(b);
            });
            screen.appendChild(az); screen.appendChild(pool);
        }
        else if (stage.type === "click") {
            let hits = 0;
            const timer = setInterval(() => {
                const b = document.createElement('div'); b.className="bubble"; b.innerText="è™šè°ˆ"; 
                b.style.left = Math.random()*70+"%"; b.style.top = Math.random()*70+"%";
                b.onclick = () => { b.remove(); hits++; if(hits >= stage.target) { clearInterval(timer); nextStep(); } };
                screen.appendChild(b); setTimeout(() => { if(b) b.remove(); }, 1200);
            }, 800);
        }
    }

    function validateCurrentGame() {
        const stage = gameRef;
        if (stage.type === "puzzle") {
            if (JSON.stringify(pInput) === JSON.stringify(stage.items)) {
                nextStep();
            } else {
                alert("âŒ é¡ºåºä¸å¯¹ï¼ŒçœŸç†éœ€è¦ä¸¥è°¨ï¼æœ¬å…³å°†é‡æ–°å¼€å§‹ã€‚"); loadGame();
            }
        } 
        else if (stage.type === "sort") {
            const isCorrect = sInput.every(i => stage.goods.includes(i)) && sInput.length === stage.goods.length;
            if (isCorrect) {
                nextStep();
            } else {
                alert("âŒ ç­›é€‰ä¸å‡†ç¡®ï¼Œè¯·å‚è€ƒåœ£ç»è¦æ±‚ï¼æœ¬å…³å°†é‡æ–°å¼€å§‹ã€‚"); loadGame();
            }
        }
    }

    function nextStep() {
        curStep++;
        if (curStep < 5) {
            alert("âœ¨ é€šå…³æˆåŠŸï¼è¿›å…¥ç¬¬ " + (curStep+1) + " è¿ç¯æŒ‘æˆ˜ã€‚");
            loadGame();
        } else {
            document.getElementById('game-stage').style.display = 'none';
            document.getElementById('final-res').style.display = 'block';
        }
    }

    function abandonGame() {
        if (confirm("ç¡®å®šè¦æ”¾å¼ƒå½“å‰çš„æŒ‘æˆ˜è¿›åº¦ï¼Œè¿”å›ä¸»èœå•å—ï¼Ÿ")) {
            location.reload();
        }
    }
</script>
</body>
</html>





